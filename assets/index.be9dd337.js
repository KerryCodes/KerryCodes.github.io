var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,s=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&o(e,a,t[a]);return e},c=(e,l)=>t(e,a(l)),i=(e,t)=>{var a={};for(var o in e)n.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o]);return a};import{R as m,F as u,r as p,a as d,m as g,I as h,b as E,S as v,C as f,T as b,c as y,d as S,D as C,U as k,B as x,e as P,f as w,g as N,l as I,M as L,P as O,h as T,i as F,j as q,k as M,n as R,o as V,p as D,q as j,s as A}from"./vendor.d46aac68.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function z(e,t,a){const{max:l,min:n,message:r,rules:o}=e,s=function(e,t){e=e||"";const{zh:a,others:l,blank:n}=t;let r=0,o=0,s=0;const c=/[\u4e00-\u9fa5]+/g,i=/【|】|、|；|‘|’|，|。|～|！|（|）|—|「|」|：|“|”|《|》|？+/g,m=/\s+/g;e=(e=(e=(e=e.replace(/[\r\n]/g,"")).replace(/&nbsp;/g," ")).replace(c,(e=>(r+=e.length,"")))).replace(i,(e=>(o+=e.length,""))),n||(e=e.replace(m,""));return s=e.length,(r+o)*a+s*l}(a,o);return s<n||s>l?Promise.reject(r):Promise.resolve()}const G=new WeakMap;class K{static createRules(e,t){return t?[...e,{validator:z.bind(null,t)}]:e}static createChildren(e){if(!e)return;const t=typeof e;if("function"===t){const t=e;return m.createElement(t,null)}return"string"===t?e:void 0}constructor(e,t,a,l,n){const r=this.parseSchemaModel(a);this.ref=e,this.publicStates=n||{},this.schemaModel=r,this.forceLeggoFormRender=()=>t((e=>e+1)),l&&(null==r||r.schemaList.forEach(l))}parseSchemaModel(e){try{null==e||e.schemaList.forEach((e=>{e.linkingNames=new Set,e.getName=()=>e.configs.itemProps.name}))}catch(t){g.error("解析失败!"),console.log(t)}finally{return e}}resetSchemaModel(e,t){const a=this.parseSchemaModel(e);t&&a.schemaList.forEach(t),this.schemaModel=a,this.forceLeggoFormRender()}updateSchema(e,t){var a,l;const n=null==(a=this.schemaModel)?void 0:a.schemaList.find((t=>t.getName()===e));if(n){const{configs:e}=n;t(e),null==(l=n.forceLeggoFormItemRender)||l.call(n)}}}function B(e){var t;const a=e,{leggo:l,onValuesChange:n}=a,r=i(a,["leggo","onValuesChange"]),{formProps:o,schemaList:p}=(null==(t=G.get(l.ref))?void 0:t.schemaModel)||{};return m.createElement(u,c(s(s({},o),r),{onValuesChange:(e,t)=>{for(const[a,l]of Object.entries(e)){const e=p.find((e=>e.getName()===a));e.currentItemValue=l,e.linkingNames.forEach((e=>{p.find((t=>t.getName()===e)).forceLeggoFormItemRender()}))}null==n||n(e,t)}}),null==p?void 0:p.map((e=>m.createElement($,{key:e.id,leggo:l,schema:e,schemaList:p}))))}function $(e){var t,a,l,n;const{leggo:r,schema:o,schemaList:i}=e,{type:g,configs:h,needDefineGetterProps:E}=o,{itemProps:v,inputProps:f,extra:b,postman:y,CustomizedInputFC:S}=h,C=(null==(t=null==y?void 0:y.params)?void 0:t.map((e=>e.value)))||[],k=(null==(a=null==y?void 0:y.data)?void 0:a.map((e=>e.value)))||[],x=(null==(l=U.total[g])?void 0:l.StandardInput)||(()=>m.createElement("div",null)),P=K.createRules(v.rules,null==b?void 0:b.wordsLimit),w=K.createChildren(null==b?void 0:b.childrenNode),[,N]=p.exports.useState(0);return p.exports.useMemo((()=>{o.forceLeggoFormItemRender=()=>N((e=>e+1)),Object.values(E).forEach((e=>{const{observedName:t,namepath:a,publicStateKey:l,reference:n,rule:s}=e,c="publicStates"===t,m=i.find((e=>e.getName()===t)),u=a.slice(0,-1).reduce(((e,t)=>e[t]),h),p=a.slice(-1)[0],d=typeof u[p];!c&&m.linkingNames.add(o.getName()),Reflect.defineProperty(u,p,{get:()=>{let e=c?r.publicStates[l]:m.currentItemValue;if(n&&s)switch(e=null==e?void 0:e.toString(),s){case"<":return e<n;case"<=":return e<=n;case"===":return e===n;case">=":return e>=n;case">":return e>n}else switch(d){case"boolean":return Boolean(e);case"number":return Number(e);case"string":return null==e?void 0:e.toString();default:return e}}})}))}),[]),p.exports.useEffect((()=>{const{method:e,url:t,params:a,data:l}=y||{};if(e&&t){const n=null==a?void 0:a.reduce(((e,t)=>(e[t.key]=""===t.value?void 0:t.value,e)),{}),r=null==l?void 0:l.reduce(((e,t)=>(e[t.key]=t.value,e)),{});d({method:e,url:t,params:n,data:r}).then((e=>{h.inputProps.options=e.data.data,N((e=>e+1))}))}}),[...C,...k]),S?m.createElement(u.Item,{label:v.label,required:null==(n=null==P?void 0:P[0])?void 0:n.required},m.createElement(S,null,m.createElement(u.Item,c(s({},v),{rules:P,noStyle:!0}),m.createElement(x,s({},f),w)))):m.createElement(u.Item,c(s({},v),{rules:P}),m.createElement(x,s({},f),w))}B.useLeggo=(e,t,a)=>{let l=null;const n=p.exports.useRef(null),[,r]=p.exports.useState(0);return G.has(n)||(l=new K(n,r,e,t,a),G.set(n,l)),l||G.get(n)};class J{constructor(e,t){this.getName=()=>this.configs.itemProps.name,this.id=Date.now().toString(),this.type=e,this.configs=I.exports.cloneDeep(t).configs,this.currentItemValue=null,this.needDefineGetterProps={}}}function W(e){const{StandardInput:t,configs:a}=e,{itemProps:l,inputProps:n,extra:r}=a;return m.createElement(u.Item,c(s({},l),{rules:K.createRules(l.rules,null==r?void 0:r.wordsLimit)}),m.createElement(t,s({},n),K.createChildren(null==r?void 0:r.childrenNode)))}const H={input:{type:"input",StandardInput:h,configs:{itemProps:{name:"input",label:"标题",rules:[{required:!0,message:"请输入标题！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请输入",allowClear:!1,maxLength:null,bordered:!0,id:""},extra:{wordsLimit:{max:10,min:0,message:"输入字符数需要在0～10之间！",rules:{zh:1,others:1,blank:!0}}}}},inputTexArea:{type:"inputTexArea",StandardInput:h.TextArea,configs:{itemProps:{name:"inputTexArea",label:"多行文本",rules:[{required:!0,message:"请输入文本！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请输入",rows:4,autoSize:!1,allowClear:!1,maxLength:null,showCount:!1,bordered:!0},extra:{wordsLimit:{max:10,min:0,message:"输入字符数需要在0～10之间！",rules:{zh:1,others:1,blank:!0}}}}},inputPassword:{type:"inputPassword",StandardInput:h.Password,configs:{itemProps:{name:"inputPassword",label:"密码",rules:[{required:!0,message:"请输入密码！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请输入",visibilityToggle:!0}}},inputNumber:{type:"inputNumber",StandardInput:E,configs:{itemProps:{name:"inputNumber",label:"数字",rules:[{required:!0,message:"请输入数字！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请输入",max:null,min:null,bordered:!0,step:"1",controls:!0,decimalSeparator:null,precision:0,readOnly:!1,keyboard:!0,autoFocus:!1}}},select:{type:"select",StandardInput:v,configs:{itemProps:{name:"select",label:"选项",rules:[{required:!0,message:"请选择！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请选择",options:[{label:"A",value:1},{label:"B",value:2}],bordered:!0,allowClear:!1,showArrow:!0,showSearch:!1,autoClearSearchValue:!0,mode:null,optionFilterProp:"value",filterOption:!0,defaultActiveFirstOption:!0,dropdownMatchSelectWidth:!0,listHeight:256,maxTagCount:null,maxTagTextLength:null,defaultOpen:!1,virtual:!0,autoFocus:!1}}},cascader:{type:"cascader",StandardInput:f,configs:{itemProps:{name:"cascader",label:"联级选择",rules:[{required:!0,message:"请选择！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请选择",options:[{label:"A",value:1,children:[{value:"nanjing",label:"Nanjing",children:[{label:"Zhong Hua Men",value:"zhonghuamen"}]}]},{label:"B",value:2,children:[{label:"West Lake",value:"xihu"}]}],allowClear:!0,showSearch:!1,bordered:!0,notFoundContent:"无数据",popupPlacement:"bottomLeft",className:"",popupClassName:"",changeOnSelect:!1,expandTrigger:"click",autoFocus:!1}}},treeSelect:{type:"treeSelect",StandardInput:b,configs:{itemProps:{name:"treeSelect",label:"树选择",rules:[{required:!0,message:"请选择！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请选择",treeData:[{title:"A",value:1,children:[{title:"Nanjing",value:"nanjing",children:[{title:"Zhong Hua Men",value:"zhonghuamen"}]}]},{title:"B",value:2,children:[{title:"West Lake",value:"xihu"}]}],allowClear:!1,autoClearSearchValue:!0,showArrow:!0,showSearch:!1,bordered:!0,multiple:!1,treeCheckable:!1,treeCheckStrictly:!1,treeDefaultExpandAll:!1,dropdownClassName:"",dropdownMatchSelectWidth:!0,listHeight:256,virtual:!0}}},checkboxGroup:{type:"checkboxGroup",StandardInput:y.Group,configs:{itemProps:{name:"checkboxGroup",label:"多选",rules:[{required:!0,message:"请选择！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,options:[{label:"A",value:1},{label:"B",value:2}],autoFocus:!1}}},radioGroup:{type:"radioGroup",StandardInput:S.Group,configs:{itemProps:{name:"radioGroup",label:"单选",rules:[{required:!0,message:"请选择！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,options:[{label:"A",value:1},{label:"B",value:2}],autoFocus:!1,optionType:"default",buttonStyle:"outline"}}},datePicker:{type:"datePicker",StandardInput:C,configs:{itemProps:{name:"datePicker",label:"日期",rules:[{required:!0,message:"请选择日期！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,placeholder:"请选择",picker:"date",allowClear:!0,bordered:!0,showNow:!0,showTime:!1,showToday:!0,className:"",dropdownClassName:"",inputReadOnly:!1,autoFocus:!1}}},rangePicker:{type:"rangePicker",StandardInput:C.RangePicker,configs:{itemProps:{name:"rangePicker",label:"日期",rules:[{required:!0,message:"请选择日期！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,picker:"day",format:""}}},upload:{type:"upload",StandardInput:k,configs:{itemProps:{name:"upload",label:"上传",valuePropName:"fileList",rules:[{required:!0,message:"请上传！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,method:"post",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",accept:"",listType:"picture",showUploadList:!0,directory:!1,maxCount:null,multiple:!1,name:"file",withCredentials:!1,openFileDialogOnClick:!0},extra:{childrenNode:()=>m.createElement(x,{icon:m.createElement(P,null)},"Click to Upload")}}},switch:{type:"switch",StandardInput:w,configs:{itemProps:{name:"switch",label:"开关",valuePropName:"checked",rules:[{required:!1,message:""}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,className:"",autoFocus:!1}}},empty:{type:"empty",StandardInput:()=>m.createElement("div",null,"占位表单仅作为表单结构的一部分，表单实际渲染前将被中间件识别并替换！"),configs:{itemProps:{name:"empty",label:"占位表单",rules:[{required:!0,message:""}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1}}},submit:{type:"submit",StandardInput:x,configs:{itemProps:{label:"",wrapperCol:{offset:8},noStyle:!1,hidden:!1},inputProps:{disabled:!1,type:"primary",htmlType:"submit",block:!1,danger:!1,ghost:!1,shape:null},extra:{childrenNode:"Submit"}}},slider:{type:"slider",StandardInput:N,configs:{itemProps:{name:"slider",label:"滑动输入",rules:[{required:!0,message:"请输入！"}],noStyle:!1,trigger:"onChange",hidden:!1},inputProps:{disabled:!1,allowClear:!1,max:100,min:0,dots:!1,included:!0,reverse:!1,step:1,tooltipPlacement:null,tooltipVisible:!1,vertical:!1}}}},U={total:s({},H),antd:H},Z={labelCol:{span:6},wrapperCol:{span:14}};function X(){const[e,t]=p.exports.useState("antd"),a=p.exports.useMemo((()=>function(e){const t=[],a=U[e],l=e=>{const t=e.target.dataset.type;e.dataTransfer.setData("text/plain",t)};for(const n of Object.values(a)){const{type:e,StandardInput:a,configs:r}=n,o=m.createElement("div",{key:e,className:"item",draggable:!0,onDragStart:l,"data-type":e},m.createElement("div",{className:"item-forbidden"},m.createElement(W,{StandardInput:a,configs:r})));t.push(o)}return t}(e)),[e]),l=p.exports.useMemo((()=>Object.keys(U).map((e=>m.createElement(L.Item,{key:e},e)))),[]);return m.createElement(p.exports.Fragment,null,m.createElement("div",null,m.createElement("div",{className:"top-area"},m.createElement("strong",null,"组件库")),m.createElement(L,{defaultSelectedKeys:["antd"],mode:"inline",onSelect:({key:e})=>t(e)},l)),m.createElement("div",{className:"leggo-configs-left"},m.createElement(u,s({},Z),m.createElement("div",{className:"leggo-configs-left-form-content"},a))))}function _(e){const{namepath:t,targetType:a,activeSchema:l,schemaListOptions:n}=e,r=l.current.needDefineGetterProps,o=t.join(),s=r[o],[c]=u.useForm(),[i,d]=p.exports.useState(!1),[g,E]=p.exports.useState(!1),[f,b]=p.exports.useState("value = "),[y,S]=p.exports.useState(!0),[C,k]=p.exports.useState("publicStates"===(null==s?void 0:s.observedName)),P=e=>{const{observedName:t,publicStateKey:l,rule:n,reference:r}=e||{};let o="value = ";if(t){if(S(!1),"publicStates"===t)o+=`publicStates[${l}]`,k(!0);else{switch(a){case"boolean":o+=`Boolean(${t}.value)`;break;case"number":o+=`Number(${t}.value)`;break;default:o+=`${t}.value?.toString()`}k(!1)}n&&r&&(o=`value = ${t}.value?.toString() ${n} "${r}"`)}else S(!0);b(o)};return p.exports.useEffect((()=>{i?(s?c.setFieldsValue(s):c.resetFields(),P(s)):E(!!s)}),[i]),m.createElement(p.exports.Fragment,null,m.createElement(O,{placement:"topLeft",trigger:"click",title:"设置关联值",visible:i,onVisibleChange:d,content:m.createElement("div",null,m.createElement(u,{form:c,onValuesChange:(e,t)=>P(t)},m.createElement(u.Item,{label:"关联对象",name:"observedName",required:!0},m.createElement(v,{options:n})),C&&m.createElement(u.Item,{label:"公共值key名",name:"publicStateKey",required:!0},m.createElement(h,null)),m.createElement(u.Item,{label:"计算规则",name:"rule"},m.createElement(v,null,m.createElement(v.Option,{value:"<"},"关联值 < 参考值"),m.createElement(v.Option,{value:"<="},"关联值 ≤ 参考值"),m.createElement(v.Option,{value:"==="},"关联值 === 参考值"),m.createElement(v.Option,{value:">="},"关联值 ≥ 参考值"),m.createElement(v.Option,{value:">"},"关联值 > 参考值"))),m.createElement(u.Item,{label:"参考值",name:"reference"},m.createElement(h,{placeholder:"参考值"})),m.createElement(u.Item,{label:"关联结果："},m.createElement("div",null,f))),m.createElement(T,null,m.createElement(x,{disabled:y,onClick:()=>{c.validateFields().then((e=>{const{observedName:a,publicStateKey:l,rule:n,reference:s}=e,c={observedName:a,publicStateKey:l,namepath:t,reference:s,rule:n};r[o]=c,d(!1)}))},type:"primary"},"确定"),m.createElement(x,{disabled:y,onClick:()=>{delete r[o],d(!1)},danger:!0},"删除关联")))},m.createElement(x,{type:g?"link":"text",icon:m.createElement(F,null)})))}const Q=(e,t)=>c(s({},e),{[t.type]:t.payload});function Y(e){const{wordsLimit:t,forceRender:a}=e,{max:l,min:n,message:r,rules:o}=t,[s,c]=p.exports.useReducer(Q,o),i=(e,t)=>{o[e]=t,c({type:e,payload:t}),a()},u=(e,l)=>{t[e]=l,a()};return m.createElement("div",null,m.createElement("strong",null,"wordsLimit："),m.createElement(O,{trigger:"click",content:m.createElement("div",{className:"words-count-configs-content"},m.createElement("div",null,m.createElement("span",{className:"title"},"汉字："),m.createElement(S.Group,{onChange:e=>i("zh",e.target.value),value:s.zh},m.createElement(S,{value:1},"1个"),m.createElement(S,{value:2},"2个"))),m.createElement(q,null),m.createElement("div",null,m.createElement("span",{className:"title"},"其它字符："),m.createElement(S.Group,{onChange:e=>i("others",e.target.value),value:s.others},m.createElement(S,{value:.5},"0.5个"),m.createElement(S,{value:1},"1个"))),m.createElement(q,null),m.createElement("div",null,m.createElement("span",{className:"title"},"空格："),m.createElement(S.Group,{onChange:e=>i("blank",e.target.value),value:s.blank},m.createElement(S,{value:!0},"包含"),m.createElement(S,{value:!1},"不包含"))))},m.createElement(x,{type:"link",size:"small"},"字符数统计规则")),m.createElement("div",{className:"configs-area"},m.createElement(T,null,m.createElement("strong",null,"max："),m.createElement(E,{min:1,defaultValue:l,onChange:e=>u("max",e),bordered:!1})),m.createElement(T,null,m.createElement("strong",null,"min："),m.createElement(E,{min:0,defaultValue:n,onChange:e=>u("min",e),bordered:!1})),m.createElement(T,null,m.createElement("strong",null,"message："),m.createElement(h,{defaultValue:r,onChange:e=>u("message",e.target.value)}))))}function ee(e){const{propOwner:t,namepath:a,propName:l,propDefaultValue:n,activeSchema:r,schemaListOptions:o,forceRender:s}=e,c=p.exports.useRef(typeof n),[i,u]=p.exports.useState(n),d=e=>{t[l]=e,u(e),s()};switch(l){case"wordsLimit":return m.createElement(Y,{wordsLimit:n,forceRender:s})}switch(c.current){case"object":const e=n,t=Object.entries(e);return m.createElement("div",null,m.createElement("strong",null,l,"："),m.createElement("div",{className:"configs-area"},t.map((([t,l])=>m.createElement(ee,{key:t,propOwner:e,namepath:[...a,t],propName:t,propDefaultValue:l,activeSchema:r,schemaListOptions:o,forceRender:s})))));case"boolean":return m.createElement(T,null,m.createElement("strong",null,l,"："),m.createElement(w,{checked:i,onChange:d}),m.createElement(_,{activeSchema:r,targetType:"boolean",namepath:a,schemaListOptions:o}));case"string":return m.createElement(T,null,m.createElement("strong",null,l,"："),m.createElement(h,{value:i,onChange:e=>d(e.target.value)}),"name"!==l&&m.createElement(_,{activeSchema:r,targetType:"string",namepath:a,schemaListOptions:o}));case"number":return m.createElement(T,null,m.createElement("strong",null,l,"："),m.createElement(E,{value:i,onChange:d,bordered:!1}),m.createElement(_,{activeSchema:r,targetType:"number",namepath:a,schemaListOptions:o}));default:return null}}const te={labelCol:{span:6},wrapperCol:{span:18}},ae=[{label:"GET",value:"get"},{label:"POST",value:"post"},{label:"PUT",value:"put"},{label:"DELETE",value:"delete"}];function le(e){const{activeSchema:t,schemaListOptions:a}=e;return m.createElement(u,c(s({},te),{onValuesChange:(e,a)=>{const{method:l,url:n,params:r,data:o}=a;t.current.configs.postman={propName:"options",method:l,url:n,params:(null==r?void 0:r.filter((e=>e)))||[],data:(null==o?void 0:o.filter((e=>e)))||[]}},initialValues:t.current.configs.postman}),m.createElement(u.Item,{label:"method",name:"method",required:!0},m.createElement(v,{options:ae})),m.createElement(u.Item,{label:"url",required:!0},m.createElement(u.Item,{name:"url"},m.createElement(h,null)),m.createElement(_,{activeSchema:t,targetType:"string",namepath:["postman","url"],schemaListOptions:a})),m.createElement(u.Item,{label:"params"},m.createElement(u.List,{name:"params"},((e,{add:l,remove:n})=>m.createElement(p.exports.Fragment,null,e.map(((e,l)=>{var r=e,{key:o,name:p,fieldKey:d}=r,g=i(r,["key","name","fieldKey"]);return m.createElement(T,{key:o,align:"baseline"},m.createElement(u.Item,c(s({},g),{name:[p,"key"],fieldKey:[d,"key"],rules:[{required:!0,message:"请定义key"}]}),m.createElement(h,{placeholder:"key"})),m.createElement(_,{activeSchema:t,targetType:"string",namepath:["postman","params",l,"value"],schemaListOptions:a}),m.createElement(u.Item,c(s({},g),{name:[p,"value"],fieldKey:[d,"value"],rules:[{required:!0,message:"请定义value"}]}),m.createElement(h,{placeholder:"value"})),m.createElement(M,{onClick:()=>n(p)}))})),m.createElement(u.Item,null,m.createElement(x,{type:"dashed",onClick:()=>l(),block:!0,icon:m.createElement(R,null)},"新增key")))))),m.createElement(u.Item,{label:"data"},m.createElement(u.List,{name:"data"},((e,{add:l,remove:n})=>m.createElement(p.exports.Fragment,null,e.map(((e,l)=>{var r=e,{key:o,name:p,fieldKey:d}=r,g=i(r,["key","name","fieldKey"]);return m.createElement(T,{key:o,align:"baseline"},m.createElement(u.Item,c(s({},g),{name:[p,"key"],fieldKey:[d,"key"],rules:[{required:!0,message:"请定义key"}]}),m.createElement(h,{placeholder:"key"})),m.createElement(_,{activeSchema:t,targetType:"string",namepath:["postman","data",l,"value"],schemaListOptions:a}),m.createElement(u.Item,c(s({},g),{name:[p,"value"],fieldKey:[d,"value"],rules:[{required:!0,message:"请定义value"}]}),m.createElement(h,{placeholder:"value"})),m.createElement(M,{onClick:()=>n(p)}))})),m.createElement(u.Item,null,m.createElement(x,{type:"dashed",onClick:()=>l(),block:!0,icon:m.createElement(R,null)},"新增key")))))))}function ne(e){const{activeSchema:t,handleChange:a}=e,l=t.current.configs.inputProps.options,[n,r]=p.exports.useState("number");return m.createElement(p.exports.Fragment,null,m.createElement("div",null,m.createElement("span",null,"value类型："),m.createElement(S.Group,{size:"small",defaultValue:"number",buttonStyle:"solid",onChange:e=>{const t=e.target.value;l.forEach((e=>{const a=e.value;e.value="string"===t?String(a):Number(a)||a.charCodeAt()})),a(l),r(t)}},m.createElement(S,{value:"string"},"string"),m.createElement(S,{value:"number"},"number"))),m.createElement(u,{onValuesChange:(e,t)=>{const l=t.options.filter((e=>void 0!==(null==e?void 0:e.label)&&void 0!==(null==e?void 0:e.value)));l.length&&a(l)}},m.createElement(u.List,{name:"options",initialValue:l},((e,{add:t,remove:a})=>m.createElement(p.exports.Fragment,null,e.map((e=>{var t=e,{key:l,name:r,fieldKey:o}=t,p=i(t,["key","name","fieldKey"]);return m.createElement(T,{key:l,style:{display:"flex",marginBottom:8},align:"baseline"},m.createElement(u.Item,c(s({},p),{name:[r,"label"],fieldKey:[o,"label"],rules:[{required:!0,message:"请定义label"}]}),m.createElement(h,{placeholder:"label"})),m.createElement(u.Item,c(s({},p),{name:[r,"value"],fieldKey:[o,"value"],rules:[{required:!0,message:"请定义value"}]}),"string"===n?m.createElement(h,{placeholder:"value"}):m.createElement(E,{placeholder:"value",bordered:!1})),m.createElement(M,{onClick:()=>a(r)}))})),m.createElement(u.Item,null,m.createElement(x,{type:"dashed",onClick:()=>t(),block:!0,icon:m.createElement(R,null)},"新增选项")))))))}function re(e){const{activeSchema:t,schemaListOptions:a,handleChangePropValue:l}=e,n=t.current.configs.postman,[r,o]=p.exports.useState(n?"dynamic":"static");return m.createElement("div",null,m.createElement("strong",null,"options："),m.createElement(S.Group,{size:"small",value:r,buttonStyle:"solid",onChange:e=>{const a=e.target.value;t.current.configs.postman="static"===a?void 0:{propName:"options",method:"get",url:"https://www.",params:[],data:[]},o(a)}},m.createElement(S.Button,{value:"static"},"静态数据"),m.createElement(S.Button,{value:"dynamic"},"远程数据")),m.createElement("div",{className:"configs-area"},"static"===r?m.createElement(ne,{activeSchema:t,handleChange:l}):m.createElement(le,{activeSchema:t,schemaListOptions:a})))}function oe(e){var t;const{propOwner:a,namepath:l,propName:n,propDefaultValue:r,activeSchema:o,schemaListOptions:s,forceRender:c}=e,[i,u]=p.exports.useState(r),d=p.exports.useMemo((()=>{var e;return(null==(e=se[n])?void 0:e.type)||typeof r}),[]),g=null==(t=se[n])?void 0:t.options,f=p.exports.useMemo((()=>null==g?void 0:g.map((e=>({label:e,value:e})))),[]),b=e=>{a[n]=e,u(e),c()};switch(d){case"options":return m.createElement(re,{activeSchema:o,schemaListOptions:s,handleChangePropValue:b});case"boolean":return m.createElement(T,null,m.createElement("strong",null,n,"："),m.createElement(w,{checked:i,onChange:b}),m.createElement(_,{activeSchema:o,targetType:"boolean",namepath:l,schemaListOptions:s}));case"string":return m.createElement(T,null,m.createElement("strong",null,n,"："),g?m.createElement(v,{allowClear:!0,style:{minWidth:150},defaultValue:i,options:f,onChange:b}):m.createElement(h,{value:i,onChange:e=>b(e.target.value)}));case"number":return m.createElement(T,null,m.createElement("strong",null,n,"："),m.createElement(E,{value:i,onChange:b,bordered:!1}),m.createElement(_,{activeSchema:o,targetType:"number",namepath:l,schemaListOptions:s}));default:return null}}const se={options:{type:"options"},maxLength:{type:"number"},max:{type:"number"},min:{type:"number"},decimalSeparator:{type:"string"},maxTagCount:{type:"number"},maxTagTextLength:{type:"number"},mode:{type:"string",options:["multiple","tags"]},optionFilterProp:{type:"string",options:["label","value"]},popupPlacement:{type:"string",options:["bottomLeft","bottomRight","topLeft","topRight"]},expandTrigger:{type:"string",options:["click","hover"]},optionType:{type:"string",options:["default","button"]},buttonStyle:{type:"string",options:["outline","solid"]},picker:{type:"string",options:["time","date","week","month","quarter","year"]},listType:{type:"string",options:["text","picture","picture-card"]},maxCount:{type:"number"},type:{type:"string",options:["default","primary","link","text","ghost","dashed"]},htmlType:{type:"string",options:["submit","button","reset"]},shape:{type:"string",options:["circle","round"]},tooltipPlacement:{type:"string",options:["topLeft","top","topRight","leftTop","left","leftBottom","rightTop","right","rightBottom","bottomLeft","bottom","bottomRight"]}};function ce(e){const{activeSchema:t,schemaList:a,forceRender:l}=e,{id:n,configs:r}=t.current||{},{itemProps:o,inputProps:s,extra:c}=r||{},i=p.exports.useMemo((()=>Object.entries(o||{})),[t.current]),u=p.exports.useMemo((()=>Object.entries(s||{})),[t.current]),d=p.exports.useMemo((()=>Object.entries(c||{})),[t.current]),g=[{label:"公共值 - publicStates",value:"publicStates"}].concat(a.map((e=>{const{label:t,name:a}=e.configs.itemProps;return{label:`${t} - ${a}`,value:a}})));return m.createElement("div",{className:"leggo-configs-right"},m.createElement("div",{className:"top-area"},m.createElement("strong",null,"属性配置")),m.createElement("div",{className:"scroll-container"},m.createElement("div",{className:"configs-area"},m.createElement(q,null,"ItemProps"),i.map((([e,a])=>m.createElement(ee,{key:n+e,propOwner:o,namepath:["itemProps",e],propName:e,propDefaultValue:a,activeSchema:t,schemaListOptions:g,forceRender:l})))),m.createElement("div",{className:"configs-area"},m.createElement(q,null,"InputProps"),u.map((([e,a])=>m.createElement(oe,{key:n+e,propOwner:s,namepath:["inputProps",e],propName:e,propDefaultValue:a,activeSchema:t,schemaListOptions:g,forceRender:l})))),m.createElement("div",{className:"configs-area"},m.createElement(q,null,"Extra"),d.map((([e,a])=>m.createElement(ee,{key:n+e,propOwner:c,namepath:["extra",e],propName:e,propDefaultValue:a,activeSchema:t,schemaListOptions:g,forceRender:l}))))))}function ie(e){const{activeSchema:t,schema:a,setSchemaList:l,forceRender:n}=e,{id:r,type:o,configs:s}=a,c=U.total[o].StandardInput,i=t.current===a;return m.createElement("div",{className:"dropped-item "+(i?"active-item":""),onClick:e=>{e.stopPropagation(),t.current=a,n()}},m.createElement(x,{type:"text",className:"delete-butt",onClick:e=>{e.stopPropagation(),i&&(t.current=null),l((e=>e.filter((e=>e.id!==r)))),n()}},"X"),m.createElement(W,{StandardInput:c,configs:s}))}const me={labelCol:{span:6},wrapperCol:{span:14}};function ue(e){const{formProps:t,schemaList:a,onPostSchemaModel:l}=e,[n]=u.useForm(),r=p.exports.useRef(""),[o,i]=p.exports.useState(!1),[d,g]=p.exports.useState(!1);return m.createElement(p.exports.Fragment,null,m.createElement(x,{type:"primary",disabled:!a.length,onClick:()=>i(!0)},"生成模板"),m.createElement(V,{title:"生成并发送模板",visible:o,onOk:()=>n.submit(),onCancel:()=>i(!1),getContainer:!1},m.createElement(u,c(s({form:n},me),{onFinish:e=>{const n=c(s({},e),{formProps:t,schemaList:a});l(n),r.current=JSON.stringify(n,null,4),i(!1),g(!0)}}),m.createElement(u.Item,{label:"模板名称",name:"name",rules:[{required:!0,message:"请填写模板名称！"}]},m.createElement(h,null)),m.createElement(u.Item,{label:"描述",name:"description"},m.createElement(h.TextArea,null)))),m.createElement(V,{title:"schemaModel",width:"50vw",bodyStyle:{height:"70vh",overflow:"auto"},visible:d,onOk:()=>{navigator.clipboard.writeText(r.current),g(!1)},okText:"复制",onCancel:()=>g(!1)},m.createElement("pre",null,r.current)))}function pe(e){const{setSchemaList:t}=e,[a,l]=p.exports.useState(!1),[n,r]=p.exports.useState("");return m.createElement(p.exports.Fragment,null,m.createElement(x,{type:"primary",onClick:()=>l(!0)},"注入模板"),m.createElement(V,{title:"注入schemaModel",width:"50vw",bodyStyle:{height:"60vh",overflow:"auto"},visible:a,onOk:()=>{const{schemaList:e}=JSON.parse(n);t(e),l(!1)},okButtonProps:{disabled:!n},onCancel:()=>l(!1)},m.createElement(h.TextArea,{value:n,onChange:e=>r(e.target.value),allowClear:!0,autoSize:{minRows:6},placeholder:"请黏贴JSON格式的schemaModel～"})))}const de={labelCol:{span:8},wrapperCol:{span:14}};function ge(e){const{formProps:t,visible:a,setVisible:l}=e,[n]=u.useForm(),r=()=>{n.setFieldsValue(t.current),l(!1)};return p.exports.useEffect((()=>{r()}),[]),m.createElement(p.exports.Fragment,null,m.createElement(x,{type:"link",onClick:()=>l(!0)},"FormProps"),m.createElement(V,{title:"设置Form的属性",visible:a,bodyStyle:{height:"60vh",overflow:"auto"},onOk:()=>{const e=n.getFieldsValue();e.name||(e.name=void 0),t.current=e,l(!1)},onCancel:r},m.createElement(u,s({form:n},de),m.createElement(u.Item,{label:"name",name:"name"},m.createElement(h,null)),m.createElement(u.Item,{label:"labelCol",required:!0},m.createElement(T,null,m.createElement(u.Item,{label:"span",name:["labelCol","span"],colon:!1},m.createElement(E,{min:0,max:24})),m.createElement(u.Item,{label:"offset",name:["labelCol","offset"],colon:!1},m.createElement(E,{min:0,max:24})))),m.createElement(u.Item,{label:"wrapperCol",required:!0},m.createElement(T,null,m.createElement(u.Item,{label:"span",name:["wrapperCol","span"],colon:!1},m.createElement(E,{min:0,max:24})),m.createElement(u.Item,{label:"offset",name:["wrapperCol","offset"],colon:!1},m.createElement(E,{min:0,max:24})))),m.createElement(u.Item,{label:"colon",name:"colon",required:!0,valuePropName:"checked"},m.createElement(w,null)),m.createElement(u.Item,{label:"labelAlign",name:"labelAlign",required:!0},m.createElement(S.Group,null,m.createElement(S,{value:"left"},"left"),m.createElement(S,{value:"right"},"right"))),m.createElement(u.Item,{label:"layout",name:"layout",required:!0},m.createElement(S.Group,null,m.createElement(S,{value:"horizontal"},"horizontal"),m.createElement(S,{value:"vertical"},"vertical"),m.createElement(S,{value:"inline"},"inline"))),m.createElement(u.Item,{label:"scrollToFirstError",name:"scrollToFirstError",required:!0,valuePropName:"checked"},m.createElement(w,null)),m.createElement(u.Item,{label:"size",name:"size"},m.createElement(v,{allowClear:!0},m.createElement(v.Option,{value:"small"},"small"),m.createElement(v.Option,{value:"middle"},"middle"),m.createElement(v.Option,{value:"large"},"large"))),m.createElement(u.Item,{label:"validateTrigger",name:"validateTrigger",required:!0},m.createElement(h,null)),m.createElement(u.Item,{label:"preserve",name:"preserve",required:!0,valuePropName:"checked"},m.createElement(w,null)),m.createElement(u.Item,{label:"requiredMark",name:"requiredMark",required:!0,valuePropName:"checked"},m.createElement(w,null)))))}function he(e){const{activeSchema:t,schemaList:a,setSchemaList:l,forceRender:n,onPostSchemaModel:r}=e,[o]=u.useForm(),i=p.exports.useRef({name:void 0,labelCol:{span:6,offset:0},wrapperCol:{span:16,offset:0},colon:!0,labelAlign:"right",layout:"horizontal",scrollToFirstError:!1,size:void 0,validateTrigger:"onChange",preserve:!0,requiredMark:!0}),[d,g]=p.exports.useState(!1);return p.exports.useEffect((()=>{o.validateFields()})),m.createElement("div",{className:"leggo-configs-middle"},m.createElement("div",{className:"top-area"},m.createElement("strong",null,"表单模板"),m.createElement("div",{className:"top-actions"},m.createElement(ge,{formProps:i,visible:d,setVisible:g}),m.createElement(pe,{setSchemaList:l}),m.createElement(ue,{formProps:i.current,schemaList:a,onPostSchemaModel:r}),m.createElement(x,{onClick:()=>{t.current=null,l([])}},"clear"))),m.createElement(u,c(s({form:o},i.current),{className:"leggo-configs-middle-form"}),m.createElement("div",{className:"drop-area",onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.getData("text/plain");if(!t)return;const n=U.total[t],r=new J(t,n);l([...a,r])}},a.map((e=>m.createElement(ie,{key:e.id,activeSchema:t,schema:e,setSchemaList:l,forceRender:n}))))))}function Ee(e){const t=p.exports.useRef(null),[a,l]=p.exports.useState([]),[,n]=p.exports.useState(0),r=()=>n((e=>e+1));return m.createElement("div",{className:"leggo-configs"},m.createElement(X,null),m.createElement(he,{schemaList:a,setSchemaList:l,activeSchema:t,forceRender:r,onPostSchemaModel:e.onPostSchemaModel}),m.createElement(ce,{schemaList:a,activeSchema:t,forceRender:r}))}Ee.registerItemStore=e=>{const{storeName:t,store:a}=e;U[t]||(U[t]=a,U.total=s(s({},a),U.total))};function ve(e){}function fe(e){const{schemaModel:t}=e,{name:a,description:l}=t,[n]=u.useForm(),r=B.useLeggo(null,null,{test:!0}),[o,s]=p.exports.useState(!1);return p.exports.useEffect((()=>{r.resetSchemaModel(t,ve)}),[t]),m.createElement("div",{className:"show-form"},m.createElement("div",{className:"header"},m.createElement("div",null,"模板名：",a),m.createElement("div",null,"描述：",l),m.createElement("div",null,m.createElement("span",null,"操作："),m.createElement(T,null,m.createElement(x,{onClick:()=>s(!0)},"查看schemaModel"),m.createElement(x,{onClick:()=>{r.updateSchema("select",(e=>{e.CustomizedInputFC=e=>m.createElement("div",null,"已填充选项：",e.children),e.inputProps.options=[{label:"A",value:1},{label:"B",value:2},{label:"C",value:3},{label:"D",value:4},{label:"E",value:5}]}))}},"填充选项")))),m.createElement(q,null),m.createElement(B,{leggo:r,form:n,onValuesChange:console.log,onFinish:console.log}),m.createElement(V,{title:"schemaModel",width:"50vw",bodyStyle:{height:"70vh",overflow:"auto"},visible:o,onOk:()=>{const e=JSON.stringify(t,null,4);navigator.clipboard.writeText(e),s(!1)},okText:"复制",onCancel:()=>s(!1)},m.createElement("pre",null,JSON.stringify(t,null,4))))}function be(){const e=p.exports.useRef({}),[t,a]=p.exports.useState(["configs"]),[l,n]=p.exports.useState(null),[r,o]=p.exports.useState(0),s=p.exports.useMemo((()=>Object.entries(e.current)),[r]);return p.exports.useMemo((()=>{Ee.registerItemStore(ye)}),[]),m.createElement("div",{className:"App"},m.createElement("div",{className:"header"},m.createElement("div",{className:"slogan"},"Leggo，拖拽式表单生成低代码平台！"),m.createElement(L,{onSelect:({key:e})=>a([e]),defaultSelectedKeys:["configs"],mode:"horizontal"},m.createElement(L.Item,{key:"configs",icon:m.createElement(D,null)},"配置模板"),m.createElement(L.SubMenu,{key:"list",title:"模板列表",disabled:!s.length,icon:m.createElement(j,null)},s.map((([e,t])=>m.createElement(L.Item,{key:e,onClick:()=>n(t)},e)))))),m.createElement("div",{className:"content-area"},"configs"===t[0]?m.createElement(Ee,{onPostSchemaModel:t=>{const a=t.name;e.current[a]=JSON.parse(JSON.stringify(t)),o((e=>e+1)),console.log("发送schema～～～～～～",t)}}):m.createElement(fe,{schemaModel:l})))}const ye={storeName:"other1",store:{multiCover:{type:"multiCover",configs:{itemProps:{name:"cover_type",label:" 封面图",colon:!0,rules:[{required:!0,message:"请上传封面图！"}]},inputProps:{disabled:!1}},StandardInput:({itemProps:e,inputProps:t})=>m.createElement(u.Item,s({},e),m.createElement(Se,s({},t)))},carInfos:{type:"carInfos",configs:{itemProps:{name:"carInfos",label:"车系-车型",colon:!0,rules:[{required:!1}]},inputProps:{disabled:!1}},StandardInput:({itemProps:e})=>m.createElement(u.Item,s({},e),m.createElement("div",null,"定制化组件"))}}},Se=e=>{const{disabled:t,value:a,onChange:l}=e,[n,r]=p.exports.useState((null==a?void 0:a.slice(0,1))||[""]);return m.createElement("div",{className:"multi-cover"},m.createElement(S.Group,{defaultValue:1,onChange:e=>{const t=e.target.value,n=[...(null==a?void 0:a.slice(0,t))||[],"","",""];n.length=t,l(n),r(n)},disabled:t},m.createElement(S,{value:1},"单图"),m.createElement(S,{value:3},"三图")),m.createElement("div",{className:"multi-cover-list"},t&&m.createElement("div",{className:"multi-cover-list-mask"}),n.map(((e,t)=>m.createElement("div",{key:e+t,className:"multi-cover-list-item",onClick:()=>(e=>{console.log(e)})(t)},e&&m.createElement("div",{className:"multi-cover-list-item-mask"},m.createElement("span",null,"替换")),e?m.createElement("img",{src:e,alt:"封面图",width:"100%"}):m.createElement(R,null))))))};A.render(m.createElement(be,null),document.getElementById("root"));
