var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&s(e,a,t[a]);return e},c=(e,l)=>t(e,a(l)),i=("undefined"!=typeof require&&require,(e,t)=>{var a={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&l)for(var s of l(e))t.indexOf(s)<0&&r.call(e,s)&&(a[s]=e[s]);return a});import{R as m,F as u,r as p,a as d,m as g,I as E,b as h,S as v,C as f,c as b,D as y,B as S,U as k,d as P,e as x,l as C,M as N,P as I,f as w,g as L,h as O,i as M,j as T,k as R,n as q,o as F,p as V}from"./vendor.2d83f9ae.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function D(e,t,a){const{max:l,min:n,message:r,rules:s}=e,o=function(e,t){e=e||"";const{zh:a,others:l,blank:n}=t;let r=0,s=0,o=0;const c=/[\u4e00-\u9fa5]+/g,i=/【|】|、|；|‘|’|，|。|～|！|（|）|—|「|」|：|“|”|《|》|？+/g,m=/\s+/g;e=(e=(e=(e=e.replace(/[\r\n]/g,"")).replace(/&nbsp;/g," ")).replace(c,(e=>(r+=e.length,"")))).replace(i,(e=>(s+=e.length,""))),n||(e=e.replace(m,""));return o=e.length,(r+s)*a+o*l}(a,s);return o<n||o>l?Promise.reject(r):Promise.resolve()}const j=new WeakMap;class K{constructor(e,t,a,l,n){this.allDisabledIsLockedToTrue=!1;const r=this.parseSchemaModel(a,l);this.ref=e,this.publicStates=n||{},this.schemaModel=r,this.forceLeggoFormRender=()=>t((e=>e+1))}static createRules(e,t){return t?[...e,{validator:D.bind(null,t)}]:e}static createChildren(e){if(!e)return;const t=typeof e;if("function"===t){const t=e;return m.createElement(t,null)}return"string"===t?e:void 0}static createCustomizedInput(e,t,a){const{inputProps:l,extra:n}=a;return a=>m.createElement(e,null,m.createElement(t,o(o({},l),a),K.createChildren(null==n?void 0:n.childrenNode)))}parseSchemaModel(e,t){try{null==e||e.schemaList.forEach(((e,a)=>{e.linkingNames=new Set,e.getName=()=>e.configs.itemProps.name,t&&t(e.configs,a)}))}catch(a){g.error("解析失败!"),console.log(a)}finally{return e}}resetSchemaModel(e,t){const a=this.parseSchemaModel(e);this.schemaModel=a,this.forceLeggoFormRender()}updateSchema(e,t){var a,l;const n=null==(a=this.schemaModel)?void 0:a.schemaList.find((t=>t.getName()===e));if(n){const{configs:e}=n;t(e),null==(l=n.forceLeggoFormItemRender)||l.call(n)}}lockAllDisabledToTrue(e=!0){this.allDisabledIsLockedToTrue=e,e&&this.schemaModel.schemaList.forEach((e=>e.configs.inputProps.disabled=!0)),this.forceLeggoFormRender()}}function G(e){var t;const a=e,{leggo:l,onValuesChange:n}=a,r=i(a,["leggo","onValuesChange"]),{formProps:s,schemaList:p}=(null==(t=j.get(l.ref))?void 0:t.schemaModel)||{};return m.createElement(u,c(o(o({},s),r),{onValuesChange:(e,t)=>{for(const[a,l]of Object.entries(e)){const e=p.find((e=>e.getName()===a));e.currentItemValue=l,e.linkingNames.forEach((e=>{p.find((t=>t.getName()===e)).forceLeggoFormItemRender()}))}null==n||n(e,t)}}),null==p?void 0:p.map((e=>m.createElement(z,{key:e.id,leggo:l,schema:e,schemaList:p}))))}function z(e){var t,a,l;const{leggo:n,schema:r,schemaList:s}=e,{type:i,configs:g,needDefineGetterProps:E}=r,{itemProps:h,inputProps:v,extra:f,postman:b,CustomizedInputFC:y}=g,S=(null==(t=null==b?void 0:b.params)?void 0:t.map((e=>e.value)))||[],k=(null==(a=null==b?void 0:b.data)?void 0:a.map((e=>e.value)))||[],P=(null==(l=J.total[i])?void 0:l.StandardInput)||(()=>m.createElement("div",null)),x=y&&K.createCustomizedInput(y,P,g),[,C]=p.exports.useState(0);return p.exports.useMemo((()=>{Object.values(E).forEach((e=>{const{observedName:t,namepath:a,publicStateKey:l,reference:o,rule:c}=e,i="publicStates"===t,m=s.find((e=>e.getName()===t)),u=a.slice(0,-1).reduce(((e,t)=>e[t]),g),p=a.slice(-1)[0],d=typeof u[p];!i&&m.linkingNames.add(r.getName()),Reflect.defineProperty(u,p,{set:()=>null,get:()=>{if("disabled"===p&&n.allDisabledIsLockedToTrue)return!0;let e=i?n.publicStates[l]:m.currentItemValue;if(o&&c)switch(e=null==e?void 0:e.toString(),c){case"<":return e<o;case"<=":return e<=o;case"===":return e===o;case">=":return e>=o;case">":return e>o}else switch(d){case"boolean":return Boolean(e);case"number":return Number(e);case"string":return null==e?void 0:e.toString();default:return e}}})}))}),[]),p.exports.useEffect((()=>{r.forceLeggoFormItemRender=()=>C((e=>e+1))}),[]),p.exports.useEffect((()=>{const{method:e,url:t,params:a,data:l}=b||{};if(e&&t){const n=null==a?void 0:a.reduce(((e,t)=>(e[t.key]=""===t.value?void 0:t.value,e)),{}),r=null==l?void 0:l.reduce(((e,t)=>(e[t.key]=t.value,e)),{});d({method:e,url:t,params:n,data:r}).then((e=>{g.inputProps.options=e.data.data,C((e=>e+1))}))}}),[...S,...k]),m.createElement(u.Item,c(o({},h),{rules:K.createRules(h.rules,null==f?void 0:f.wordsLimit)}),x?m.createElement(x,null):m.createElement(P,o({},v),K.createChildren(null==f?void 0:f.childrenNode)))}G.useLeggo=(e,t,a)=>{let l=null;const n=p.exports.useRef(null),[,r]=p.exports.useState(0);return j.has(n)||(l=new K(n,r,e,t,a),j.set(n,l)),l||j.get(n)};class A{constructor(e,t){this.getName=()=>this.configs.itemProps.name,this.id=Date.now().toString(),this.type=e,this.configs=C.exports.cloneDeep(t).configs,this.currentItemValue=null,this.needDefineGetterProps={}}}function B(e){const{StandardInput:t,configs:a}=e,{itemProps:l,inputProps:n,extra:r}=a;return m.createElement(u.Item,c(o({},l),{rules:K.createRules(l.rules,null==r?void 0:r.wordsLimit)}),m.createElement(t,o({},n),K.createChildren(null==r?void 0:r.childrenNode)))}const $={input:{type:"input",configs:{itemProps:{name:"input",label:"标题",colon:!0,rules:[{required:!0,message:"请输入标题！"}]},inputProps:{disabled:!1,placeholder:"请输入"},extra:{wordsLimit:{max:10,min:0,message:"输入字符数需要在0～10之间！",rules:{zh:1,others:1,blank:!0}}}},StandardInput:E},inputTexArea:{type:"inputTexArea",configs:{itemProps:{name:"inputTexArea",label:"多行文本",colon:!0,rules:[{required:!0,message:"请输入文本！"}]},inputProps:{disabled:!1,placeholder:"请输入",rows:4},extra:{wordsLimit:{max:10,min:0,message:"输入字符数需要在0～10之间！",rules:{zh:1,others:1,blank:!0}}}},StandardInput:E.TextArea},inputPassword:{type:"inputPassword",configs:{itemProps:{name:"inputPassword",label:"密码",colon:!0,rules:[{required:!0,message:"请输入密码！"}]},inputProps:{disabled:!1,placeholder:"请输入"}},StandardInput:E.Password},inputNumber:{type:"inputNumber",configs:{itemProps:{name:"inputNumber",label:"数字",colon:!0,rules:[{required:!0,message:"请输入数字！"}]},inputProps:{disabled:!1,placeholder:"请输入",max:10,min:0,bordered:!0}},StandardInput:h},select:{type:"select",configs:{itemProps:{name:"select",label:"选项",colon:!0,rules:[{required:!0,message:"请选择！"}]},inputProps:{disabled:!1,placeholder:"请选择",options:[{label:"A",value:1},{label:"B",value:2}]}},StandardInput:v},checkboxGroup:{type:"checkboxGroup",configs:{itemProps:{name:"checkboxGroup",label:"多选",colon:!0,rules:[{required:!0,message:"请选择！"}]},inputProps:{disabled:!1,options:[{label:"A",value:1},{label:"B",value:2}]}},StandardInput:f.Group},radioGroup:{type:"radioGroup",configs:{itemProps:{name:"radioGroup",label:"单选",colon:!0,rules:[{required:!0,message:"请选择！"}]},inputProps:{disabled:!1,options:[{label:"A",value:1},{label:"B",value:2}]}},StandardInput:b.Group},datePicker:{type:"datePicker",configs:{itemProps:{name:"datePicker",label:"日期",colon:!0,rules:[{required:!0,message:"请选择日期！"}]},inputProps:{disabled:!1,placeholder:"请选择",picker:"date"}},StandardInput:y},rangePicker:{type:"rangePicker",configs:{itemProps:{name:"rangePicker",label:"日期",colon:!0,rules:[{required:!0,message:"请选择日期！"}]},inputProps:{disabled:!1,picker:"day"}},StandardInput:y.RangePicker},upload:{type:"upload",configs:{itemProps:{name:"upload",label:"上传",valuePropName:"fileList",colon:!0,rules:[{required:!0,message:"请上传！"}]},inputProps:{disabled:!1,listType:"picture",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",showUploadList:!1},extra:{childrenNode:()=>m.createElement(S,{icon:m.createElement(k,null)},"Click to Upload")}},StandardInput:P},switch:{type:"switch",configs:{itemProps:{name:"switch",label:"开关",valuePropName:"checked",colon:!0,rules:[{required:!1,message:""}]},inputProps:{disabled:!1}},StandardInput:x},empty:{type:"empty",configs:{itemProps:{name:"empty",label:"占位表单",colon:!0,rules:[{required:!0}]},inputProps:{disabled:!1}},StandardInput:()=>m.createElement("div",null,"占位表单仅作为表单结构的一部分，表单实际渲染前将被中间件识别并替换！")},submit:{type:"submit",configs:{itemProps:{wrapperCol:{offset:8,span:16}},inputProps:{disabled:!1,type:"primary",htmlType:"submit"},extra:{childrenNode:"Submit"}},StandardInput:S}},J={total:o({},$),antd:$},U={labelCol:{span:6},wrapperCol:{span:14}};function W(){const[e,t]=p.exports.useState("antd"),a=p.exports.useMemo((()=>function(e){const t=[],a=J[e],l=e=>{const t=e.target.dataset.type;e.dataTransfer.setData("text/plain",t)};for(const n of Object.values(a)){const{type:e,StandardInput:a,configs:r}=n,s=m.createElement("div",{key:e,className:"item",draggable:!0,onDragStart:l,"data-type":e},m.createElement("div",{className:"item-forbidden"},m.createElement(B,{StandardInput:a,configs:r})));t.push(s)}return t}(e)),[e]),l=p.exports.useMemo((()=>Object.keys(J).map((e=>m.createElement(N.Item,{key:e},e)))),[]);return m.createElement(p.exports.Fragment,null,m.createElement("div",null,m.createElement("div",{className:"top-area"},m.createElement("strong",null,"组件库")),m.createElement(N,{defaultSelectedKeys:["antd"],mode:"inline",onSelect:({key:e})=>t(e)},l)),m.createElement("div",{className:"leggo-configs-left"},m.createElement(u,o({},U),m.createElement("div",{className:"leggo-configs-left-form-content"},a))))}function X(e){const{namepath:t,targetType:a,activeSchema:l,schemaListOptions:n}=e,r=l.current.needDefineGetterProps,s=t.join(),o=r[s],[c]=u.useForm(),[i,d]=p.exports.useState(!1),[g,h]=p.exports.useState(!1),[f,b]=p.exports.useState("value = "),[y,k]=p.exports.useState(!0),[P,x]=p.exports.useState("publicStates"===(null==o?void 0:o.observedName)),C=e=>{const{observedName:t,publicStateKey:l,rule:n,reference:r}=e||{};let s="value = ";if(t){if(k(!1),"publicStates"===t)s+=`publicStates[${l}]`,x(!0);else{switch(a){case"boolean":s+=`Boolean(${t}.value)`;break;case"number":s+=`Number(${t}.value)`;break;default:s+=`${t}.value?.toString()`}x(!1)}n&&r&&(s=`value = ${t}.value?.toString() ${n} "${r}"`)}else k(!0);b(s)};return p.exports.useEffect((()=>{i?(o?c.setFieldsValue(o):c.resetFields(),C(o)):h(!!o)}),[i]),m.createElement(p.exports.Fragment,null,m.createElement(I,{placement:"topLeft",trigger:"click",title:"设置关联值",visible:i,onVisibleChange:d,content:m.createElement("div",null,m.createElement(u,{form:c,onValuesChange:(e,t)=>C(t)},m.createElement(u.Item,{label:"关联对象",name:"observedName",required:!0},m.createElement(v,{options:n})),P&&m.createElement(u.Item,{label:"公共值key名",name:"publicStateKey",required:!0},m.createElement(E,null)),m.createElement(u.Item,{label:"计算规则",name:"rule"},m.createElement(v,null,m.createElement(v.Option,{value:"<"},"关联值 < 参考值"),m.createElement(v.Option,{value:"<="},"关联值 ≤ 参考值"),m.createElement(v.Option,{value:"==="},"关联值 === 参考值"),m.createElement(v.Option,{value:">="},"关联值 ≥ 参考值"),m.createElement(v.Option,{value:">"},"关联值 > 参考值"))),m.createElement(u.Item,{label:"参考值",name:"reference"},m.createElement(E,{placeholder:"参考值"})),m.createElement(u.Item,{label:"关联结果："},m.createElement("div",null,f))),m.createElement(w,null,m.createElement(S,{disabled:y,onClick:()=>{c.validateFields().then((e=>{const{observedName:a,publicStateKey:l,rule:n,reference:o}=e,c={observedName:a,publicStateKey:l,namepath:t,reference:o,rule:n};r[s]=c,d(!1)}))},type:"primary"},"确定"),m.createElement(S,{disabled:y,onClick:()=>{delete r[s],d(!1)},danger:!0},"删除关联")))},m.createElement(S,{type:g?"link":"text",icon:m.createElement(L,null)})))}const _={labelCol:{span:6},wrapperCol:{span:18}},H=[{label:"GET",value:"get"},{label:"POST",value:"post"},{label:"PUT",value:"put"},{label:"DELETE",value:"delete"}];function Q(e){const{activeSchema:t,schemaListOptions:a}=e;return m.createElement(u,c(o({},_),{onValuesChange:(e,a)=>{const{method:l,url:n,params:r,data:s}=a;t.current.configs.postman={propName:"options",method:l,url:n,params:(null==r?void 0:r.filter((e=>e)))||[],data:(null==s?void 0:s.filter((e=>e)))||[]}},initialValues:t.current.configs.postman}),m.createElement(u.Item,{label:"method",name:"method",required:!0},m.createElement(v,{options:H})),m.createElement(u.Item,{label:"url",required:!0},m.createElement(u.Item,{name:"url"},m.createElement(E,null)),m.createElement(X,{activeSchema:t,targetType:"string",namepath:["postman","url"],schemaListOptions:a})),m.createElement(u.Item,{label:"params"},m.createElement(u.List,{name:"params"},((e,{add:l,remove:n})=>m.createElement(p.exports.Fragment,null,e.map(((e,l)=>{var r=e,{key:s,name:p,fieldKey:d}=r,g=i(r,["key","name","fieldKey"]);return m.createElement(w,{key:s,align:"baseline"},m.createElement(u.Item,c(o({},g),{name:[p,"key"],fieldKey:[d,"key"],rules:[{required:!0,message:"请定义key"}]}),m.createElement(E,{placeholder:"key"})),m.createElement(X,{activeSchema:t,targetType:"string",namepath:["postman","params",l,"value"],schemaListOptions:a}),m.createElement(u.Item,c(o({},g),{name:[p,"value"],fieldKey:[d,"value"],rules:[{required:!0,message:"请定义value"}]}),m.createElement(E,{placeholder:"value"})),m.createElement(O,{onClick:()=>n(p)}))})),m.createElement(u.Item,null,m.createElement(S,{type:"dashed",onClick:()=>l(),block:!0,icon:m.createElement(M,null)},"新增key")))))),m.createElement(u.Item,{label:"data"},m.createElement(u.List,{name:"data"},((e,{add:l,remove:n})=>m.createElement(p.exports.Fragment,null,e.map(((e,l)=>{var r=e,{key:s,name:p,fieldKey:d}=r,g=i(r,["key","name","fieldKey"]);return m.createElement(w,{key:s,align:"baseline"},m.createElement(u.Item,c(o({},g),{name:[p,"key"],fieldKey:[d,"key"],rules:[{required:!0,message:"请定义key"}]}),m.createElement(E,{placeholder:"key"})),m.createElement(X,{activeSchema:t,targetType:"string",namepath:["postman","data",l,"value"],schemaListOptions:a}),m.createElement(u.Item,c(o({},g),{name:[p,"value"],fieldKey:[d,"value"],rules:[{required:!0,message:"请定义value"}]}),m.createElement(E,{placeholder:"value"})),m.createElement(O,{onClick:()=>n(p)}))})),m.createElement(u.Item,null,m.createElement(S,{type:"dashed",onClick:()=>l(),block:!0,icon:m.createElement(M,null)},"新增key")))))))}function Y(e){const{activeSchema:t,handleChange:a}=e,l=t.current.configs.inputProps.options,[n,r]=p.exports.useState("number");return m.createElement(p.exports.Fragment,null,m.createElement("div",null,m.createElement("span",null,"value类型："),m.createElement(b.Group,{size:"small",defaultValue:"number",buttonStyle:"solid",onChange:e=>{const t=e.target.value;l.forEach((e=>{const a=e.value;e.value="string"===t?String(a):Number(a)||a.charCodeAt()})),a(l),r(t)}},m.createElement(b,{value:"string"},"string"),m.createElement(b,{value:"number"},"number"))),m.createElement(u,{onValuesChange:(e,t)=>{const l=t.options.filter((e=>void 0!==(null==e?void 0:e.label)&&void 0!==(null==e?void 0:e.value)));l.length&&a(l)}},m.createElement(u.List,{name:"options",initialValue:l},((e,{add:t,remove:a})=>m.createElement(p.exports.Fragment,null,e.map((e=>{var t=e,{key:l,name:r,fieldKey:s}=t,p=i(t,["key","name","fieldKey"]);return m.createElement(w,{key:l,style:{display:"flex",marginBottom:8},align:"baseline"},m.createElement(u.Item,c(o({},p),{name:[r,"label"],fieldKey:[s,"label"],rules:[{required:!0,message:"请定义label"}]}),m.createElement(E,{placeholder:"label"})),m.createElement(u.Item,c(o({},p),{name:[r,"value"],fieldKey:[s,"value"],rules:[{required:!0,message:"请定义value"}]}),"string"===n?m.createElement(E,{placeholder:"value"}):m.createElement(h,{placeholder:"value",bordered:!1})),m.createElement(O,{onClick:()=>a(r)}))})),m.createElement(u.Item,null,m.createElement(S,{type:"dashed",onClick:()=>t(),block:!0,icon:m.createElement(M,null)},"新增选项")))))))}function Z(e){const{activeSchema:t,schemaListOptions:a,handleChangePropValue:l}=e,n=t.current.configs.postman,[r,s]=p.exports.useState(n?"dynamic":"static");return m.createElement("div",null,m.createElement("strong",null,"options："),m.createElement(b.Group,{size:"small",value:r,buttonStyle:"solid",onChange:e=>{const a=e.target.value;t.current.configs.postman="static"===a?void 0:{propName:"options",method:"get",url:"https://www.",params:[],data:[]},s(a)}},m.createElement(b.Button,{value:"static"},"静态数据"),m.createElement(b.Button,{value:"dynamic"},"远程数据")),m.createElement("div",{className:"configs-area"},"static"===r?m.createElement(Y,{activeSchema:t,handleChange:l}):m.createElement(Q,{activeSchema:t,schemaListOptions:a})))}const ee=(e,t)=>c(o({},e),{[t.type]:t.payload});function te(e){const{wordsLimit:t,forceRender:a}=e,{max:l,min:n,message:r,rules:s}=t,[o,c]=p.exports.useReducer(ee,s),i=(e,t)=>{s[e]=t,c({type:e,payload:t}),a()},u=(e,l)=>{t[e]=l,a()};return m.createElement("div",null,m.createElement("strong",null,"wordsLimit："),m.createElement(I,{trigger:"click",content:m.createElement("div",{className:"words-count-configs-content"},m.createElement("div",null,m.createElement("span",{className:"title"},"汉字："),m.createElement(b.Group,{onChange:e=>i("zh",e.target.value),value:o.zh},m.createElement(b,{value:1},"1个"),m.createElement(b,{value:2},"2个"))),m.createElement(T,null),m.createElement("div",null,m.createElement("span",{className:"title"},"其它字符："),m.createElement(b.Group,{onChange:e=>i("others",e.target.value),value:o.others},m.createElement(b,{value:.5},"0.5个"),m.createElement(b,{value:1},"1个"))),m.createElement(T,null),m.createElement("div",null,m.createElement("span",{className:"title"},"空格："),m.createElement(b.Group,{onChange:e=>i("blank",e.target.value),value:o.blank},m.createElement(b,{value:!0},"包含"),m.createElement(b,{value:!1},"不包含"))))},m.createElement(S,{type:"link",size:"small"},"字符数统计规则")),m.createElement("div",{className:"configs-area"},m.createElement(w,null,m.createElement("strong",null,"max："),m.createElement(h,{min:1,defaultValue:l,onChange:e=>u("max",e),bordered:!1})),m.createElement(w,null,m.createElement("strong",null,"min："),m.createElement(h,{min:0,defaultValue:n,onChange:e=>u("min",e),bordered:!1})),m.createElement(w,null,m.createElement("strong",null,"message："),m.createElement(E,{defaultValue:r,onChange:e=>u("message",e.target.value)}))))}function ae(e){const{propOwner:t,namepath:a,propName:l,propDefaultValue:n,activeSchema:r,schemaList:s,forceRender:o}=e,c=p.exports.useRef(typeof n),[i,u]=p.exports.useState(n),d=[{label:"公共值 - publicStates",value:"publicStates"}].concat(s.map((e=>{const{label:t,name:a}=e.configs.itemProps;return{label:`${t} - ${a}`,value:a}}))),g=e=>{t[l]=e,u(e),o()};switch(l){case"options":return m.createElement(Z,{activeSchema:r,schemaListOptions:d,handleChangePropValue:g});case"wordsLimit":return m.createElement(te,{wordsLimit:n,forceRender:o});case"picker":const e=[{label:"time",value:"time"},{label:"date",value:"date"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"quarter",value:"quarter"},{label:"year",value:"year"}];return m.createElement(w,null,m.createElement("strong",null,l,"："),m.createElement(v,{options:e,defaultValue:i,onChange:g}),m.createElement(X,{activeSchema:r,targetType:"string",namepath:a,schemaListOptions:d}))}switch(c.current){case"object":if(!n)return null;const e=n,t=Object.entries(e);return m.createElement("div",null,m.createElement("strong",null,l,"："),m.createElement("div",{className:"configs-area"},t.map((([t,l])=>m.createElement(ae,{key:t,propOwner:e,namepath:[...a,t],propName:t,propDefaultValue:l,activeSchema:r,schemaList:s,forceRender:o})))));case"boolean":return m.createElement(w,null,m.createElement("strong",null,l,"："),m.createElement(x,{checked:i,onChange:g}),m.createElement(X,{activeSchema:r,targetType:"boolean",namepath:a,schemaListOptions:d}));case"string":return m.createElement(w,null,m.createElement("strong",null,l,"："),m.createElement(E,{value:i,onChange:e=>g(e.target.value)}),"name"!==l&&m.createElement(X,{activeSchema:r,targetType:"string",namepath:a,schemaListOptions:d}));case"number":return m.createElement(w,null,m.createElement("strong",null,l,"："),m.createElement(h,{value:i,onChange:g,bordered:!1}),m.createElement(X,{activeSchema:r,targetType:"number",namepath:a,schemaListOptions:d}));default:return null}}function le(e){const{activeSchema:t,schemaList:a,forceRender:l}=e,{id:n,configs:r}=t.current||{},{itemProps:s,inputProps:o,extra:c}=r||{},i=p.exports.useMemo((()=>Object.entries(s||{})),[t.current]),u=p.exports.useMemo((()=>Object.entries(o||{})),[t.current]),d=p.exports.useMemo((()=>Object.entries(c||{})),[t.current]);return m.createElement("div",{className:"leggo-configs-right"},m.createElement("div",{className:"top-area"},m.createElement("strong",null,"属性配置")),m.createElement("div",{className:"scroll-container"},m.createElement("div",{className:"configs-area"},m.createElement(T,null,"ItemProps"),i.map((([e,r])=>m.createElement(ae,{key:n+e,propOwner:s,namepath:["itemProps",e],propName:e,propDefaultValue:r,activeSchema:t,schemaList:a,forceRender:l})))),m.createElement("div",{className:"configs-area"},m.createElement(T,null,"InputProps"),u.map((([e,r])=>m.createElement(ae,{key:n+e,propOwner:o,namepath:["inputProps",e],propName:e,propDefaultValue:r,activeSchema:t,schemaList:a,forceRender:l})))),m.createElement("div",{className:"configs-area"},m.createElement(T,null,"Extra"),d.map((([e,r])=>m.createElement(ae,{key:n+e,propOwner:c,namepath:["extra",e],propName:e,propDefaultValue:r,activeSchema:t,schemaList:a,forceRender:l}))))))}function ne(e){const{activeSchema:t,schema:a,setSchemaList:l,forceRender:n}=e,{id:r,type:s,configs:o}=a,c=J.total[s].StandardInput,i=t.current===a;return m.createElement("div",{className:"dropped-item "+(i?"active-item":""),onClick:e=>{e.stopPropagation(),t.current=a,n()}},m.createElement(S,{type:"text",className:"delete-butt",onClick:e=>{e.stopPropagation(),i&&(t.current=null),l((e=>e.filter((e=>e.id!==r)))),n()}},"X"),m.createElement(B,{StandardInput:c,configs:o}))}const re={labelCol:{span:6},wrapperCol:{span:14}};function se(e){const{formProps:t,schemaList:a,onPostSchemaModel:l}=e,[n]=u.useForm(),r=p.exports.useRef(""),[s,i]=p.exports.useState(!1),[d,g]=p.exports.useState(!1);return m.createElement(p.exports.Fragment,null,m.createElement(S,{type:"primary",disabled:!a.length,onClick:()=>i(!0)},"生成模板"),m.createElement(R,{title:"生成并发送模板",visible:s,onOk:()=>n.submit(),onCancel:()=>i(!1),getContainer:!1},m.createElement(u,c(o({form:n},re),{onFinish:e=>{const n=c(o({},e),{formProps:t,schemaList:a});l(n),r.current=JSON.stringify(n,null,4),i(!1),g(!0)}}),m.createElement(u.Item,{label:"模板名称",name:"name",rules:[{required:!0,message:"请填写模板名称！"}]},m.createElement(E,null)),m.createElement(u.Item,{label:"描述",name:"description"},m.createElement(E.TextArea,null)))),m.createElement(R,{title:"schemaModel",width:"50vw",bodyStyle:{height:"70vh",overflow:"auto"},visible:d,onOk:()=>{navigator.clipboard.writeText(r.current),g(!1)},okText:"复制",onCancel:()=>g(!1)},m.createElement("pre",null,r.current)))}function oe(e){const{setSchemaList:t}=e,[a,l]=p.exports.useState(!1),[n,r]=p.exports.useState("");return m.createElement(p.exports.Fragment,null,m.createElement(S,{type:"link",onClick:()=>l(!0)},"注入模板"),m.createElement(R,{title:"注入schemaModel",width:"50vw",bodyStyle:{height:"70vh",overflow:"auto"},visible:a,onOk:()=>{const{schemaList:e}=JSON.parse(n);t(e),l(!1)},okButtonProps:{disabled:!n},onCancel:()=>l(!1)},m.createElement(E.TextArea,{value:n,onChange:e=>r(e.target.value),allowClear:!0,autoSize:{minRows:6},placeholder:"请黏贴JSON格式的schemaModel～"})))}function ce(e){const{activeSchema:t,schemaList:a,setSchemaList:l,forceRender:n,onPostSchemaModel:r}=e,[s]=u.useForm(),[i,d]=p.exports.useState({labelCol:{span:6},wrapperCol:{span:14}}),g=e=>{d((t=>o(o({},t),e)))};return p.exports.useEffect((()=>{s.validateFields()})),m.createElement("div",{className:"leggo-configs-middle"},m.createElement("div",{className:"top-area"},m.createElement("strong",null,"表单模板"),m.createElement("div",{className:"top-actions"},m.createElement("div",null,m.createElement("strong",null,"labelCol："),m.createElement(h,{min:0,max:24-i.wrapperCol.span,value:i.labelCol.span,onChange:e=>g({labelCol:{span:e}})})),m.createElement("div",null,m.createElement("strong",null,"wrapperCol："),m.createElement(h,{min:0,max:24-i.labelCol.span,value:i.wrapperCol.span,onChange:e=>g({wrapperCol:{span:e}})})),m.createElement(oe,{setSchemaList:l}),m.createElement(se,{formProps:i,schemaList:a,onPostSchemaModel:r}),m.createElement(S,{onClick:()=>{t.current=null,l([])}},"clear"))),m.createElement(u,c(o({form:s},i),{className:"leggo-configs-middle-form"}),m.createElement("div",{className:"drop-area",onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.getData("text/plain");if(!t)return;const n=J.total[t],r=new A(t,n);l([...a,r])}},a.map((e=>m.createElement(ne,{key:e.id,activeSchema:t,schema:e,setSchemaList:l,forceRender:n}))))))}function ie(e){const t=p.exports.useRef(null),[a,l]=p.exports.useState([]),[,n]=p.exports.useState(0),r=()=>n((e=>e+1));return m.createElement("div",{className:"leggo-configs"},m.createElement(W,null),m.createElement(ce,{schemaList:a,setSchemaList:l,activeSchema:t,forceRender:r,onPostSchemaModel:e.onPostSchemaModel}),m.createElement(le,{schemaList:a,activeSchema:t,forceRender:r}))}ie.registerItemStore=e=>{const{storeName:t,store:a}=e;J[t]||(J[t]=a,J.total=o(o({},a),J.total))};function me(e){}function ue(e){const{schemaModel:t}=e,{name:a,description:l}=t,[n]=u.useForm(),r=G.useLeggo(null,null,{test:!0}),[s,o]=p.exports.useState(!1);return p.exports.useEffect((()=>{r.resetSchemaModel(t,me)}),[t]),m.createElement("div",{className:"show-form"},m.createElement("div",{className:"header"},m.createElement("div",null,"模板名：",a),m.createElement("div",null,"描述：",l),m.createElement("div",null,m.createElement("span",null,"操作："),m.createElement(w,null,m.createElement(S,{onClick:()=>o(!0)},"查看schemaModel"),m.createElement(S,{onClick:()=>{r.updateSchema("select",(e=>{e.CustomizedInputFC=e=>m.createElement("div",null,"已填充选项：",e.children),e.inputProps.options=[{label:"A",value:1},{label:"B",value:2},{label:"C",value:3},{label:"D",value:4},{label:"E",value:5}]}))}},"填充选项")))),m.createElement(T,null),m.createElement(G,{leggo:r,form:n,onValuesChange:console.log,onFinish:console.log}),m.createElement(R,{title:"schemaModel",width:"50vw",bodyStyle:{height:"70vh",overflow:"auto"},visible:s,onOk:()=>{const e=JSON.stringify(t,null,4);navigator.clipboard.writeText(e),o(!1)},okText:"复制",onCancel:()=>o(!1)},m.createElement("pre",null,JSON.stringify(t,null,4))))}function pe(){const e=p.exports.useRef({}),[t,a]=p.exports.useState(["configs"]),[l,n]=p.exports.useState(null),[r,s]=p.exports.useState(0),o=p.exports.useMemo((()=>Object.entries(e.current)),[r]);return p.exports.useMemo((()=>{ie.registerItemStore(de)}),[]),m.createElement("div",{className:"App"},m.createElement("div",{className:"header"},m.createElement("div",{className:"slogan"},"Leggo，拖拽式表单生成低代码平台！"),m.createElement(N,{onSelect:({key:e})=>a([e]),defaultSelectedKeys:["configs"],mode:"horizontal"},m.createElement(N.Item,{key:"configs",icon:m.createElement(q,null)},"配置模板"),m.createElement(N.SubMenu,{key:"list",title:"模板列表",disabled:!o.length,icon:m.createElement(F,null)},o.map((([e,t])=>m.createElement(N.Item,{key:e,onClick:()=>n(t)},e)))))),m.createElement("div",{className:"content-area"},"configs"===t[0]?m.createElement(ie,{onPostSchemaModel:t=>{const a=t.name;e.current[a]=JSON.parse(JSON.stringify(t)),s((e=>e+1)),console.log("发送schema～～～～～～",t)}}):m.createElement(ue,{schemaModel:l})))}const de={storeName:"other1",store:{multiCover:{type:"multiCover",configs:{itemProps:{name:"cover_type",label:" 封面图",colon:!0,rules:[{required:!0,message:"请上传封面图！"}]},inputProps:{disabled:!1}},StandardInput:({itemProps:e,inputProps:t})=>m.createElement(u.Item,o({},e),m.createElement(ge,o({},t)))},carInfos:{type:"carInfos",configs:{itemProps:{name:"carInfos",label:"车系-车型",colon:!0,rules:[{required:!1}]},inputProps:{disabled:!1}},StandardInput:({itemProps:e})=>m.createElement(u.Item,o({},e),m.createElement("div",null,"定制化组件"))}}},ge=e=>{const{disabled:t,value:a,onChange:l}=e,[n,r]=p.exports.useState((null==a?void 0:a.slice(0,1))||[""]);return m.createElement("div",{className:"multi-cover"},m.createElement(b.Group,{defaultValue:1,onChange:e=>{const t=e.target.value,n=[...(null==a?void 0:a.slice(0,t))||[],"","",""];n.length=t,l(n),r(n)},disabled:t},m.createElement(b,{value:1},"单图"),m.createElement(b,{value:3},"三图")),m.createElement("div",{className:"multi-cover-list"},t&&m.createElement("div",{className:"multi-cover-list-mask"}),n.map(((e,t)=>m.createElement("div",{key:e+t,className:"multi-cover-list-item",onClick:()=>(e=>{console.log(e)})(t)},e&&m.createElement("div",{className:"multi-cover-list-item-mask"},m.createElement("span",null,"替换")),e?m.createElement("img",{src:e,alt:"封面图",width:"100%"}):m.createElement(M,null))))))};V.render(m.createElement(pe,null),document.getElementById("root"));
